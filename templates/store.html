{% extends 'index.html' %}


{% block body %}
{% load cart %}
{% load static %}
<div class="container">

<div class="row">
<div class="dropdown col-sm-2 mt-4">
  <button class="btn btn-success text-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Game Categories
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
  <a  class="dropdown-item" href="/store">ALL</a>
  {% for data in category %}
    <a  class="dropdown-item" href="?category={{data.id}}">{{data.name}}</a>
    {% endfor %}
  </div>
</div>

  {% comment %} Products {% endcomment %}

  <div class="col-sm-10 row">
  {% for products in allProducts %}
<div class="card p-4 m-2  mx-auto" id="{{products.id}}" style="width: 22rem;">
  <img class="card-img-top" src= " {{products.image.url}}" alt="Card image cap" style="height:180px">
  <div class="card-body">

  <h5 class="card-cat">{{products.category.name}} </h5>
  
    <h5 class="card-title">{{products.name}} </h5>
    <p id='price' class="card-text">{{products.price}} <span>tk</span></p>
        
  {% if products|is_in_cart:request.session.cart_add %}
   <div class="card-footer row no-gutters p-0 " >
    
    <form action="" method="post" class="col-2">
  {% csrf_token %}
  <input hidden type="text" name="addCart"  value="{{products.id}}">
  <input hidden type="text" name="remove"  value="True">
  <input type="submit" value="-"  class="btn  btn-secondary">
  </form>

  <div class="text-center text-dark col mt-1">{{products|cart_quantity:request.session.cart_add}} Item added</div>
  
  <form action="" method="post" class="col-2">
  {% csrf_token %}
  <input hidden type="text" name="addCart"  value="{{products.id}}">
  <input type="submit" value="+"  class="btn  btn-secondary">
  </form>

  </div>
 
  {% else %}
  
      <form action="#{{products.id}}" method="POST">
    <input hidden type="text" name="addCart"  value="{{products.id}}">
    <input type="submit" class="btn btn-primary" value="Add to Cart" >
    {% comment %} <button type="submit" >Add to Cart</button> {% endcomment %}
    {% csrf_token %}
    </form>
   

    {% endif %}

    
    
  </div>

</div>

{% endfor %}
  
  
  </div>
</div>
</div>

<style>
.card-title{
color:black;
}

.card-cat{
    color:gray;
}

#price{
    color:black;
}

.card{
    border-radius:20px;
}

.card-img-top{
    -webkit-box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.27);
-moz-box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.27);
box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.27);
border-radius:20px;
}
}

</style>
{% endblock body %}